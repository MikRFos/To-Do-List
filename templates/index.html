{% extends "base.html" %}
{% block title %}
<title>Home</title>
{% endblock %}
{% block content %}

{% if not data %}
<div class="row">
    <h1 class="display-5 offset-2 col-2 text-center" style="--bs-bg-opacity: .25;">Create A List</h1>
    <h1 class="display-5 offset-3 col-2 py-3 text-center" style="--bs-bg-opacity: .25;">Sample List</h1>
</div>
<div class="row">
    <div class="card offset-2 col-2">
        <h5 class="card-title text-center">Create a New List</h5>
        <div class="card-body">
            <form method="post" action="/">
                {{ form.csrf_token }}
                {{ form.title.label(class_="form-label") }}
                {{ form.title(class_="form-control") }}
                {{ form.image_url.label(class_="form-label") }}
                {{ form.image_url(class_="form-control") }}
                {{ form.sub_objectives.label(class_="form-label") }}
                {{ form.sub_objectives(class_="form-control") }}
                {{ form.submit(class_="btn btn-primary mt-2") }}
            </form>
        </div>
    </div>
    <div class="card offset-3 col-2" style="width: 20rem;">
        <img src="https://placedog.net/200/280?random">
        <h5 class="card-title d-grid">
            <button class="btn btn-success" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample"
                    aria-expanded="false" aria-controls="collapseExample">
                Get a Dog
            </button>
        </h5>
        <div class="card-body collapse" id="collapseExample">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <input class="form-check-input bg-success" type="checkbox" checked>
                    Pick a breed
                </li>
                <li class="list-group-item">
                    <input class="form-check-input" type="checkbox">
                    Find a shelter or breeder and visit
                </li>
                <li class="list-group-item">
                    <input class="form-check-input" type="checkbox">
                    Gather supplies
                </li>
                <li class="list-group-item">
                    <input class="form-check-input" type="checkbox">
                    Bring Dog Home!
                </li>
            </ul>
            <div class="progress mt-1">
                <div class="progress-bar bg-success" role="progressbar" aria-label="Basic example" style="width: 25%"
                     aria-valuenow="25" aria-valuemin="0"
                     aria-valuemax="100">25%
                </div>
            </div>
            <div class="d-grid col-3 ms-auto mt-3">
                <button href="#" type="button" class="btn btn-success">Update</button>
            </div>
        </div>
    </div>

    <!--<h1 class="display-1 text-center">Create Your Own List</h1>-->
</div>
{% else %}
<div class="row">
    <h1 class="display-5 offset-1 col-2 text-center bg-success py-3" style="--bs-bg-opacity: .5;">Create A List</h1>
    <h1 class="display-1 text-center offset-1 col-8 bg-success py-3" style="--bs-bg-opacity: .5;">Your Lists</h1>
</div>
<div class="row">
    <div class="card border-light offset-1 col-2">
        <h5 class="card-title text-center">Create a New List</h5>
        <div class="card-body">
            <form method="post" action="/">
                {{ form.csrf_token }}
                {{ form.title.label(class_="form-label") }}
                {{ form.title(class_="form-control") }}
                {{ form.image_url.label(class_="form-label") }}
                {{ form.image_url(class_="form-control") }}
                {{ form.sub_objectives.label(class_="form-label") }}
                {{ form.sub_objectives(class_="form-control") }}
                {{ form.submit(class_="btn btn-primary mt-2") }}
            </form>
        </div>
    </div>
    <div class="offset-1 col-8">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-2 row-cols-xl-3 row-cols-xxl-4 g-2">
        {% for todo in data %}
        <div class="col">
            <div class="card " style="width: 20rem;">
                {% if todo['progress'] < 100 %}
                <img class="card-img-top" src="{{todo['img_url']}}">
                <h5 class="card-title m-0 d-grid">
                    <button class="btn btn-success fs-4" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse{{loop.index}}" aria-expanded="false"
                            aria-controls="collapse{loop.index}}">
                        {{todo['title']}}
                    </button>
                </h5>
                {% else %}
                <img class="card-img-top list-complete" src="{{todo['img_url']}}">
                <h5 class="card-title m-0 d-grid">
                    <button class="btn btn-outline-secondary fs-4" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse{{loop.index}}" aria-expanded="false"
                            aria-controls="collapse{loop.index}}">
                        {{todo['title']}}
                    </button>
                </h5>
                {% endif %}
                <div class="card-body collapse" id="collapse{{loop.index}}">
                    <form method="post" action="/">
                        {% for item in todo['sub_objectives']%}
                        <ul class="list-group list-group-flush m-0 p-0">
                            <li class="list-group-item">
                                <div class="d-grid">
                                    {% if item[1] %}
                                    <a href="{{ url_for('update_list', list_num=todo.id, obj_num=loop.index, current=item[1]) }}"
                                       type="button"
                                       class="btn btn-outline-warning text-decoration-line-through text-start fs-5">{{item[0]}}</a>
                                    {% else %}
                                    <a href="{{ url_for('update_list', list_num=todo.id, obj_num=loop.index, current=item[1]) }}"
                                       type="button" class="btn btn-outline-success text-start fs-5">{{item[0]}}</a>
                                    {% endif %}
                                </div>
                            </li>
                        </ul>
                        {% endfor %}
                        <div class="progress mt-1">
                            <div class="progress-bar bg-success" role="progressbar" aria-label="Basic example"
                                 style="width: {{todo['progress']}}%" aria-valuenow="25" aria-valuemin="0"
                                 aria-valuemax="100">{{todo['progress']}}%
                            </div>
                        </div>
                        <div class="d-grid col-3 ms-auto mt-3">
                            <button href="#" type="button" class="btn btn-success">Update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
        </div>
</div>
{% endif %}
{% endblock %}